<!DOCTYPE html>
<html>
  <head>
    <title>EasyLoan Chat</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f5f7fa;
      }

      /* Header Like Your Screenshot */
      .header {
        width: 100%;
        padding: 40px 0;
        text-align: center;
        background: linear-gradient(135deg, #0f5fb0, #38a3d1);
        color: white;
        font-size: 32px;
        font-weight: 700;
      }

      /* Chat Container */
      .chat-container {
        width: 60%;
        margin: 40px auto;
        background: white;
        border-radius: 16px;
        padding: 25px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      #chat {
        height: 450px;
        overflow-y: auto;
        padding: 15px;
      }

      .message {
        margin: 12px 0;
        max-width: 80%;
        padding: 12px 16px;
        border-radius: 12px;
        font-size: 15px;
      }

      .user {
        background: #d0ebff;
        color: #003f73;
        margin-left: auto;
        border-bottom-right-radius: 5px;
      }

      .bot {
        background: #f0f0f0;
        color: #333;
        margin-right: auto;
        border-bottom-left-radius: 5px;
      }

      /* Input Box */
      .input-area {
        display: flex;
        margin-top: 15px;
      }

      input {
        flex: 1;
        padding: 14px;
        border-radius: 10px;
        border: 1px solid #ccc;
        outline: none;
        font-size: 16px;
      }

      button {
        padding: 14px 20px;
        border: none;
        background: #0f78d4;
        color: white;
        border-radius: 10px;
        cursor: pointer;
        margin-left: 10px;
        font-size: 15px;
      }

      button:hover {
        background: #0d66b4;
      }
    </style>
  </head>

  <body>
    <div class="header">EasyLoan Chat Assistant</div>

    <div class="chat-container">
      <div id="chat"></div>

      <div class="input-area">
        <input id="msg" placeholder="Type your message..." />
        <button onclick="sendMsg()">Send</button>
      </div>
    </div>

    <script>
      let messages = [];

      async function sendMsg() {
        let input = document.getElementById("msg");
        let text = input.value.trim();
        if (!text) return;

        addMessage("user", text);
        messages.push({ role: "user", content: text });
        console.log(messages);

        input.value = "";

        const reply = await fetch("http://localhost:5000/api/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ messages }),
        });

        const data = await reply.json();

        addMessage("bot", data.reply);
        messages.push({ role: "bot", content: data.reply });
      }

      function addMessage(type, text) {
        const chat = document.getElementById("chat");
        let msg = document.createElement("div");
        msg.classList.add("message", type);
        msg.innerHTML = text;
        chat.appendChild(msg);
        chat.scrollTop = chat.scrollHeight;
      }
    </script>
  </body>
</html>
